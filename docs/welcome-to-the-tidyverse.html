<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Welcome to the Tidyverse | CDABS R Workshop Series</title>
  <meta name="description" content="This is material to accompany a 4 part introduction to R workshop series." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Welcome to the Tidyverse | CDABS R Workshop Series" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is material to accompany a 4 part introduction to R workshop series." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Welcome to the Tidyverse | CDABS R Workshop Series" />
  
  <meta name="twitter:description" content="This is material to accompany a 4 part introduction to R workshop series." />
  

<meta name="author" content="Jean-Paul Courneya and Amy Yarnell" />


<meta name="date" content="2022-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-r-and-rstudio.html"/>
<link rel="next" href="plotting-with-ggplot2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">CDABS R Series</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.1</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i><b>1.2</b> License</a></li>
</ul></li>
<li class="part"><span><b>Session I</b></span></li>
<li class="chapter" data-level="2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction to R and RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#why-learn-r"><i class="fa fa-check"></i><b>2.2</b> Why learn R?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#starting-out-in-r"><i class="fa fa-check"></i><b>2.3</b> Starting out in R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#downloading-installing-and-running-r"><i class="fa fa-check"></i><b>2.3.1</b> Downloading, Installing and Running R</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#rstudio"><i class="fa fa-check"></i><b>2.3.2</b> RStudio</a></li>
<li class="chapter" data-level="2.3.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#rstudio-cloud"><i class="fa fa-check"></i><b>2.3.3</b> RStudio Cloud</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#using-this-book"><i class="fa fa-check"></i><b>2.4</b> Using this book</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#working-in-the-console"><i class="fa fa-check"></i><b>2.5</b> Working in the Console</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#objects"><i class="fa fa-check"></i><b>2.6</b> Objects</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#creating-objects"><i class="fa fa-check"></i><b>2.6.1</b> Creating Objects</a></li>
<li class="chapter" data-level="2.6.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#working-with-objects"><i class="fa fa-check"></i><b>2.6.2</b> Working with Objects</a></li>
<li class="chapter" data-level="2.6.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#naming-objects"><i class="fa fa-check"></i><b>2.6.3</b> Naming Objects</a></li>
<li class="chapter" data-level="2.6.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#challenge"><i class="fa fa-check"></i><b>2.6.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#saving-code-in-an-r-script"><i class="fa fa-check"></i><b>2.7</b> Saving code in an R script</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#setting-your-working-directory"><i class="fa fa-check"></i><b>2.8</b> Setting your Working Directory</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#functions-and-their-arguments"><i class="fa fa-check"></i><b>2.9</b> Functions and their arguments</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#getting-help"><i class="fa fa-check"></i><b>2.9.1</b> Getting Help</a></li>
<li class="chapter" data-level="2.9.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#challenge-using-functions"><i class="fa fa-check"></i><b>2.9.2</b> Challenge: using functions</a></li>
</ul></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#packages"><i class="fa fa-check"></i><b>2.10</b> Packages</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#vectors"><i class="fa fa-check"></i><b>2.11</b> Vectors</a>
<ul>
<li class="chapter" data-level="2.11.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#what-is-a-vector"><i class="fa fa-check"></i><b>2.11.1</b> What is a Vector?</a></li>
<li class="chapter" data-level="2.11.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#working-with-vectors"><i class="fa fa-check"></i><b>2.11.2</b> Working with Vectors</a></li>
<li class="chapter" data-level="2.11.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#missing-data"><i class="fa fa-check"></i><b>2.11.3</b> Missing Data</a></li>
<li class="chapter" data-level="2.11.4" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#mixing-data-types"><i class="fa fa-check"></i><b>2.11.4</b> Mixing Data Types</a></li>
<li class="chapter" data-level="2.11.5" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#indexing-and-subsetting-vectors"><i class="fa fa-check"></i><b>2.11.5</b> Indexing and Subsetting vectors</a></li>
</ul></li>
<li class="chapter" data-level="2.12" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#data-frames-tibbles-and-exploring-data"><i class="fa fa-check"></i><b>2.12</b> Data frames, Tibbles, and Exploring Data</a>
<ul>
<li class="chapter" data-level="2.12.1" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#creating-data-frames"><i class="fa fa-check"></i><b>2.12.1</b> Creating data frames</a></li>
<li class="chapter" data-level="2.12.2" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#exploring-data-frames"><i class="fa fa-check"></i><b>2.12.2</b> Exploring data frames</a></li>
<li class="chapter" data-level="2.12.3" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#quickly-exploring-data-with-plots"><i class="fa fa-check"></i><b>2.12.3</b> Quickly exploring data with plots</a></li>
</ul></li>
<li class="chapter" data-level="2.13" data-path="introduction-to-r-and-rstudio.html"><a href="introduction-to-r-and-rstudio.html#exercises"><i class="fa fa-check"></i><b>2.13</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Session II</b></span></li>
<li class="chapter" data-level="3" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Welcome to the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#what-is-tidy-data"><i class="fa fa-check"></i><b>3.1</b> What is Tidy Data?</a></li>
<li class="chapter" data-level="3.2" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#getting-set-up"><i class="fa fa-check"></i><b>3.2</b> Getting set up</a></li>
<li class="chapter" data-level="3.3" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#install"><i class="fa fa-check"></i><b>3.3</b> Install</a></li>
<li class="chapter" data-level="3.4" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#the-data"><i class="fa fa-check"></i><b>3.4</b> The Data</a></li>
<li class="chapter" data-level="3.5" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#importing-data"><i class="fa fa-check"></i><b>3.5</b> Importing data</a></li>
<li class="chapter" data-level="3.6" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#exploring-data"><i class="fa fa-check"></i><b>3.6</b> Exploring Data</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="welcome-to-the-tidyverse.html"><a href="welcome-to-the-tidyverse.html#challenge-1"><i class="fa fa-check"></i><b>3.6.1</b> Challenge</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>Session III</b></span></li>
<li class="chapter" data-level="4" data-path="plotting-with-ggplot2.html"><a href="plotting-with-ggplot2.html"><i class="fa fa-check"></i><b>4</b> Plotting with ggplot2</a></li>
<li class="part"><span><b>Session IV</b></span></li>
<li class="chapter" data-level="5" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html"><i class="fa fa-check"></i><b>5</b> Reproducible Project Management</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#rstudio-projects"><i class="fa fa-check"></i><b>5.1</b> RStudio Projects</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#what-is-real"><i class="fa fa-check"></i><b>5.1.1</b> What is Real?</a></li>
<li class="chapter" data-level="5.1.2" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>5.1.2</b> Where does your analysis live?</a></li>
<li class="chapter" data-level="5.1.3" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#createRproj"><i class="fa fa-check"></i><b>5.1.3</b> Creating an RStudio project</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#version-control-and-rstudio"><i class="fa fa-check"></i><b>5.2</b> Version Control and RStudio</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#why-git"><i class="fa fa-check"></i><b>5.2.1</b> Why Git?</a></li>
<li class="chapter" data-level="5.2.2" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#whats-github"><i class="fa fa-check"></i><b>5.2.2</b> What’s GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#settingupremote"><i class="fa fa-check"></i><b>5.3</b> Setting up a remote repository on Github</a></li>
<li class="chapter" data-level="5.4" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#connecting-rstudio-to-github"><i class="fa fa-check"></i><b>5.4</b> Connecting Rstudio to Github</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#introduce-yourself-to-git"><i class="fa fa-check"></i><b>5.4.1</b> Introduce yourself to Git</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#get-a-personal-access-token-pat"><i class="fa fa-check"></i><b>5.5</b> Get a personal access token (PAT)</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#create-the-pat"><i class="fa fa-check"></i><b>5.5.1</b> Create the PAT</a></li>
<li class="chapter" data-level="5.5.2" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#put-your-pat-into-the-git-credential-store"><i class="fa fa-check"></i><b>5.5.2</b> Put your PAT into the Git credential store</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#checking-out-a-project-from-a-version-control-remote-repository"><i class="fa fa-check"></i><b>5.6</b> Checking out a project from a version control remote repository</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#clone-the-new-github-repository-to-your-computer-via-rstudio"><i class="fa fa-check"></i><b>5.6.1</b> Clone the new GitHub repository to your computer via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#making-some-changes-save-commit."><i class="fa fa-check"></i><b>5.7</b> Making some changes, save, commit.</a></li>
<li class="chapter" data-level="5.8" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#push-your-local-changes-online-to-github"><i class="fa fa-check"></i><b>5.8</b> Push your local changes online to GitHub</a></li>
<li class="chapter" data-level="5.9" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#confirm-the-local-change-propagated-to-the-github-remote"><i class="fa fa-check"></i><b>5.9</b> Confirm the local change propagated to the GitHub remote</a></li>
<li class="chapter" data-level="5.10" data-path="reproducible-project-management.html"><a href="reproducible-project-management.html#clean-up"><i class="fa fa-check"></i><b>5.10</b> Clean up</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html"><i class="fa fa-check"></i><b>6</b> Reproducible Reports with R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>6.1</b> What is R Markdown</a></li>
<li class="chapter" data-level="6.2" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#r-markdown-related-packages"><i class="fa fa-check"></i><b>6.2</b> R Markdown Related Packages</a></li>
<li class="chapter" data-level="6.3" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#how-does-r-markdown-work"><i class="fa fa-check"></i><b>6.3</b> How does R Markdown work</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#creating-an-r-markdown-file"><i class="fa fa-check"></i><b>6.3.1</b> Creating an R Markdown file</a></li>
<li class="chapter" data-level="6.3.2" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#r-markdown-basic-components"><i class="fa fa-check"></i><b>6.3.2</b> R Markdown Basic Components</a></li>
<li class="chapter" data-level="6.3.3" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#markdown"><i class="fa fa-check"></i><b>6.3.3</b> Markdown</a></li>
<li class="chapter" data-level="6.3.4" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>6.3.4</b> R code chunks</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="reproducible-reports-with-r-markdown.html"><a href="reproducible-reports-with-r-markdown.html#resources-for-r-markdown"><i class="fa fa-check"></i><b>6.4</b> Resources for R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="shiny-apps.html"><a href="shiny-apps.html"><i class="fa fa-check"></i><b>7</b> Shiny Apps</a>
<ul>
<li class="chapter" data-level="7.1" data-path="shiny-apps.html"><a href="shiny-apps.html#shiny-tutorial-2"><i class="fa fa-check"></i><b>7.1</b> Shiny app basics</a></li>
<li class="chapter" data-level="7.2" data-path="shiny-apps.html"><a href="shiny-apps.html#create-an-empty-shiny-app"><i class="fa fa-check"></i><b>7.2</b> Create an empty Shiny app</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="shiny-apps.html"><a href="shiny-apps.html#alternate-way-to-create-a-shiny-app-separate-ui-and-server-files"><i class="fa fa-check"></i><b>7.2.1</b> Alternate way to create a Shiny app: separate UI and server files</a></li>
<li class="chapter" data-level="7.2.2" data-path="shiny-apps.html"><a href="shiny-apps.html#let-rstudio-fill-out-a-shiny-app-template-for-you"><i class="fa fa-check"></i><b>7.2.2</b> Let RStudio fill out a Shiny app template for you</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="shiny-apps.html"><a href="shiny-apps.html#an-example-shiny-app"><i class="fa fa-check"></i><b>7.3</b> An example Shiny App</a></li>
<li class="chapter" data-level="7.4" data-path="shiny-apps.html"><a href="shiny-apps.html#host-your-shiny-app"><i class="fa fa-check"></i><b>7.4</b> Host your Shiny App</a></li>
<li class="chapter" data-level="7.5" data-path="shiny-apps.html"><a href="shiny-apps.html#resources"><i class="fa fa-check"></i><b>7.5</b> Resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="further-resources.html"><a href="further-resources.html"><i class="fa fa-check"></i><b>A</b> Further Resources</a>
<ul>
<li class="chapter" data-level="A.1" data-path="further-resources.html"><a href="further-resources.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>A.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="A.2" data-path="further-resources.html"><a href="further-resources.html#using-rstudio"><i class="fa fa-check"></i><b>A.2</b> Using RStudio</a></li>
<li class="chapter" data-level="A.3" data-path="further-resources.html"><a href="further-resources.html#the-tidyverse"><i class="fa fa-check"></i><b>A.3</b> The Tidyverse</a></li>
<li class="chapter" data-level="A.4" data-path="further-resources.html"><a href="further-resources.html#graphing-in-r"><i class="fa fa-check"></i><b>A.4</b> Graphing in R</a></li>
<li class="chapter" data-level="A.5" data-path="further-resources.html"><a href="further-resources.html#r-based-technologies"><i class="fa fa-check"></i><b>A.5</b> R Based Technologies</a></li>
<li class="chapter" data-level="A.6" data-path="further-resources.html"><a href="further-resources.html#git-github"><i class="fa fa-check"></i><b>A.6</b> Git &amp; Github</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="selected-glossary-of-r-terminology.html"><a href="selected-glossary-of-r-terminology.html"><i class="fa fa-check"></i><b>B</b> Selected Glossary of R Terminology</a></li>
<li class="chapter" data-level="C" data-path="packages-and-functions-used.html"><a href="packages-and-functions-used.html"><i class="fa fa-check"></i><b>C</b> Packages and Functions Used</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CDABS R Workshop Series</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="welcome-to-the-tidyverse" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Welcome to the Tidyverse<a href="welcome-to-the-tidyverse.html#welcome-to-the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this lesson and the next, we will be using a group of packages which are part of what is known as the <strong><code>tidyverse</code></strong> - “an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.”<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>, developed by Hadley Wickham.</p>
<p>These packages include :</p>
<ul>
<li><strong><code>readr</code></strong> for importing data into R</li>
<li><strong><code>dplyr</code></strong> for handling common data wrangling tasks for tabular data</li>
<li><strong><code>tidyr</code></strong> which enables you to swiftly convert between different data formats (long vs. wide) for plotting and analysis</li>
<li><strong><code>lubridate</code></strong> for working with dates</li>
<li><strong><code>ggplot2</code></strong> for visualizing data (we’ll explore this package in the next chapter).</li>
</ul>
<p>For the full list of tidyverse packages and documentation visit <a href="https://www.tidyverse.org/">tidyverse.org</a>
You can install these packages individually, or you can install the entire tidyverse in one go.</p>
<div id="what-is-tidy-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> What is Tidy Data?<a href="welcome-to-the-tidyverse.html#what-is-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Data is considered “tidy” if it follows three rules:</p>
<ol style="list-style-type: decimal">
<li>Each column is a variable</li>
<li>Each row is an observation</li>
<li>Each cell is a single value<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></li>
</ol>
<p>Data “in the wild” often isn’t tidy, but the tidyverse packages can help you create and analyze tidy datasets.</p>
</div>
<div id="getting-set-up" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Getting set up<a href="welcome-to-the-tidyverse.html#getting-set-up" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Sign in to RStudio Cloud (Or, if you haven’t already, sign up for a free account at RStudio Cloud <a href="https://rstudio.cloud/plans/free" class="uri">https://rstudio.cloud/plans/free</a>)</li>
<li>Go to the RStudio Cloud class project for this session <a href="https://rstudio.cloud/project/4260029" class="uri">https://rstudio.cloud/project/4260029</a></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Note the text that marks this as a Temporary Copy. Select the
<code>Save a Permanent Copy</code> button to begin working!</li>
</ol></li>
<li>Create a new script called <code>measles_script.R</code></li>
</ol>
<p><strong>Reminder:</strong> You can open a new R script in the following ways:
1. Go to the menu bar <code>File &gt; New File &gt; R Script</code>
2. In the toolbar below the menu bar, select the new blank file icon, and then R Script from the menu bar.
3. In the Files pane, select the New Blank File Icon, and then R Script
4. Use the keyboard shortcut <code>Ctrl+Shift+N</code> (PC) or <code>Shift+Command+N</code>(Mac)</p>
</div>
<div id="install" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Install<a href="welcome-to-the-tidyverse.html#install" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First we are going to use <code>install.packages()</code> to install <strong><code>tidyverse</code></strong>, if you haven’t already. Then we are going to load <strong><code>tidyverse</code></strong> with the <code>library()</code> function. You only need to install a package once, but you will load it each time you start a new r session. To learn more about <strong><code>dplyr</code></strong> and <strong><code>tidyr</code></strong> after the workshop, you may want to check out this <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">handy data transformation with <strong><code>dplyr</code></strong> cheatsheet</a> and this <a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">one about <strong><code>tidyr</code></strong></a>.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="welcome-to-the-tidyverse.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install tidyverse if you haven&#39;t yet</span></span>
<span id="cb146-2"><a href="welcome-to-the-tidyverse.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb146-3"><a href="welcome-to-the-tidyverse.html#cb146-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-4"><a href="welcome-to-the-tidyverse.html#cb146-4" aria-hidden="true" tabindex="-1"></a><span class="co">#load tidyverse</span></span>
<span id="cb146-5"><a href="welcome-to-the-tidyverse.html#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div id="the-data" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> The Data<a href="welcome-to-the-tidyverse.html#the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For this lesson we will be using data which comes from <a href="https://www.tycho.pitt.edu/">Project Tycho</a> - an open data project from the University of Pittsburgh which provides standardized datasets on numerous diseases to aid global health research.</p>
<p>Throughout this lesson, we will be using a dataset from Project Tycho featuring historical counts of measles cases in the U.S.. We want to clean and present this data in a way that makes it easy to see how measles cases fluctuated over time. In the next lesson, we’ll start visualizing this cleaned up data.</p>
<p>A useful feature of Project Tycho data is their use of a common set of variables. Read more about their <a href="%22https://osf.io/paefw/%22">data format</a>.</p>
</div>
<div id="importing-data" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Importing data<a href="welcome-to-the-tidyverse.html#importing-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now let’s import the data we’ll be working with. You can import data with code, or you can use RStudio’s GUI. Let’s look at both.</p>
<p>In the environment pane, select the button that says <code>Import Dataset</code> and choose the option <code>From text (readr)</code>. This means we are going to be using the <strong><code>readr</code></strong> package, which is part of the <strong><code>tidyverse</code></strong> to read a file.</p>
<p><img src="images/import_data.png" width="456" style="display: block; margin: auto;" /></p>
<p>Select <code>Browse</code> in the dialog box that opens, and navigate to your <code>data</code> folder and choose the file called <code>measles_us.csv</code></p>
<p><img src="images/import_browse.png" width="813" style="display: block; margin: auto;" />
<img src="images/import_browse2.png" width="484" style="display: block; margin: auto;" /></p>
<p>A new window will open with a spreadsheet view of the data. We can use this window to make some choices about how the data is imported.</p>
<p><img src="images/import_window.png" width="812" style="display: block; margin: auto;" /></p>
<p>RStudio will use the file name as the default name for your dataset, but you could change it to whatever you want. In this case <code>measles_us</code> works pretty well.</p>
<p>RStudio will also try to guess the data type of your columns. It will mostly get it right, but it is not unusual that you will manually need to tell it what data type certain columns are.</p>
<p>For example, let’s look at the columns <code>PeriodStartDate</code> and <code>PeriodEndDate</code>. These columns contain dates, but RStudio wants to read them as character data. This is very common when importing data. Let’s change the first column <code>PeriodStartDate</code> to the date data type, by using the drop down menu to select date data. We’ll learn another way to change data types later in this lesson and take care of <code>PeriodEndDate</code> then.</p>
<p><img src="images/data_dropdown.PNG" width="145" style="display: block; margin: auto;" /></p>
<p>You will be asked to confirm that the input format of the date is <code>%m/%d/%Y</code> which is like writing <code>mm/dd/YYYY</code>. The program needs to know what the correct input date is so it can return the right output date <code>YYYY-mm-dd</code>, the international standard date format.</p>
<p><img src="images/data_dropdown_confirm.PNG" width="270" style="display: block; margin: auto;" /></p>
<p>Now our data is ready to import. We can select the import button. As you may have noticed, the code behind this import dialog box is also being generated.</p>
<p>We can find the code in our History pane. Highlight the line of code and use the <code>To Source</code> button to add it to the script.</p>
<p>So what does all this code actually mean?</p>
<p>We are using a function from the <strong><code>readr</code></strong> package called <code>read_csv()</code>. This function takes as an argument the path to where the file is located. This can take the form of an absolute path, a relative path to the working directory, or a url. The <code>col_types</code> argument lets you specify the data type by column name.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="welcome-to-the-tidyverse.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb150-2"><a href="welcome-to-the-tidyverse.html#cb150-2" aria-hidden="true" tabindex="-1"></a>measles_us <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb150-3"><a href="welcome-to-the-tidyverse.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/measles_us.csv&quot;</span>,</span>
<span id="cb150-4"><a href="welcome-to-the-tidyverse.html#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb150-5"><a href="welcome-to-the-tidyverse.html#cb150-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">PeriodStartDate =</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">&quot;%m/%d/%Y&quot;</span>)))</span></code></pre></div>
</div>
<div id="exploring-data" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Exploring Data<a href="welcome-to-the-tidyverse.html#exploring-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After reading the data, you will typically want to start exploring it. There are several ways of doing this. Let’s review some ways of exploring data that we learned in the last chapter. <code>View()</code> opens the data as a file in your documents pane.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="welcome-to-the-tidyverse.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(measles_us)</span></code></pre></div>
<p>Use <code>summary()</code> to look at each column</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="welcome-to-the-tidyverse.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(measles_us)</span></code></pre></div>
<pre><code>##  ConditionName      ConditionSNOMED    PathogenName       CountryName       
##  Length:422051      Min.   :14189004   Length:422051      Length:422051     
##  Class :character   1st Qu.:14189004   Class :character   Class :character  
##  Mode  :character   Median :14189004   Mode  :character   Mode  :character  
##                     Mean   :14189004                                        
##                     3rd Qu.:14189004                                        
##                     Max.   :14189004                                        
##   CountryISO         Admin1Name         Admin1ISO          Admin2Name       
##  Length:422051      Length:422051      Length:422051      Length:422051     
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##    CityName         PeriodStartDate      PeriodEndDate     
##  Length:422051      Min.   :1906-09-16   Length:422051     
##  Class :character   1st Qu.:1926-09-12   Class :character  
##  Mode  :character   Median :1940-04-07   Mode  :character  
##                     Mean   :1946-02-24                     
##                     3rd Qu.:1966-03-06                     
##                     Max.   :2001-12-30                     
##  PartOfCumulativeCountSeries DiagnosisCertainty  SourceName       
##  Min.   :0.0                 Mode:logical       Length:422051     
##  1st Qu.:0.0                 NA&#39;s:422051        Class :character  
##  Median :0.0                                    Mode  :character  
##  Mean   :0.2                                                      
##  3rd Qu.:0.0                                                      
##  Max.   :1.0                                                      
##    CountValue     
##  Min.   :    0.0  
##  1st Qu.:    1.0  
##  Median :    6.0  
##  Mean   :  136.5  
##  3rd Qu.:   41.0  
##  Max.   :53008.0</code></pre>
<p>You can look at the beginning of your dataset with <code>head()</code>.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="welcome-to-the-tidyverse.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(measles_us)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 15
##   ConditionName ConditionSNOMED PathogenName  CountryName  CountryISO Admin1Name
##   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;     
## 1 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## 2 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## 3 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## 4 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## 5 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## 6 Measles              14189004 Measles virus UNITED STAT… US         WISCONSIN 
## # … with 9 more variables: Admin1ISO &lt;chr&gt;, Admin2Name &lt;chr&gt;, CityName &lt;chr&gt;,
## #   PeriodStartDate &lt;date&gt;, PeriodEndDate &lt;chr&gt;,
## #   PartOfCumulativeCountSeries &lt;dbl&gt;, DiagnosisCertainty &lt;lgl&gt;,
## #   SourceName &lt;chr&gt;, CountValue &lt;dbl&gt;</code></pre>
<p>or the end of your dataset with <code>tail()</code></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="welcome-to-the-tidyverse.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(measles_us)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 15
##   ConditionName ConditionSNOMED PathogenName  CountryName  CountryISO Admin1Name
##   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;     
## 1 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## 2 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## 3 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## 4 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## 5 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## 6 Measles              14189004 Measles virus UNITED STAT… US         NORTHERN …
## # … with 9 more variables: Admin1ISO &lt;chr&gt;, Admin2Name &lt;chr&gt;, CityName &lt;chr&gt;,
## #   PeriodStartDate &lt;date&gt;, PeriodEndDate &lt;chr&gt;,
## #   PartOfCumulativeCountSeries &lt;dbl&gt;, DiagnosisCertainty &lt;lgl&gt;,
## #   SourceName &lt;chr&gt;, CountValue &lt;dbl&gt;</code></pre>
<p>Notice that this prints out the first and last 6 rows of your data frame to the console in what is called a <em>tibble</em>. A tibble is a form of data frame that is particular to the tidyverse. The differences rest mainly it how it reads and displays data, but for the purposes of this class we will use the terms somewhat interchangeably. The tibble printed from <code>head()</code> and <code>tail()</code> will only print as many columns as can fit on the width of your monitor.</p>
<p>The <code>glimpse()</code> function which is part of the <strong><code>tidyverse</code></strong> package <strong><code>tibble</code></strong>, lets you see the column names and data types clearly.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="welcome-to-the-tidyverse.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co">#summary of columns and first few entries</span></span>
<span id="cb158-2"><a href="welcome-to-the-tidyverse.html#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(measles_us)</span></code></pre></div>
<pre><code>## Rows: 422,051
## Columns: 15
## $ ConditionName               &lt;chr&gt; &quot;Measles&quot;, &quot;Measles&quot;, &quot;Measles&quot;, &quot;Measles&quot;…
## $ ConditionSNOMED             &lt;dbl&gt; 14189004, 14189004, 14189004, 14189004, 14…
## $ PathogenName                &lt;chr&gt; &quot;Measles virus&quot;, &quot;Measles virus&quot;, &quot;Measles…
## $ CountryName                 &lt;chr&gt; &quot;UNITED STATES OF AMERICA&quot;, &quot;UNITED STATES…
## $ CountryISO                  &lt;chr&gt; &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, &quot;US&quot;, …
## $ Admin1Name                  &lt;chr&gt; &quot;WISCONSIN&quot;, &quot;WISCONSIN&quot;, &quot;WISCONSIN&quot;, &quot;WI…
## $ Admin1ISO                   &lt;chr&gt; &quot;US-WI&quot;, &quot;US-WI&quot;, &quot;US-WI&quot;, &quot;US-WI&quot;, &quot;US-WI…
## $ Admin2Name                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
## $ CityName                    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
## $ PeriodStartDate             &lt;date&gt; 1927-11-20, 1927-11-27, 1927-12-04, 1927-…
## $ PeriodEndDate               &lt;chr&gt; &quot;11/26/1927&quot;, &quot;12/3/1927&quot;, &quot;12/10/1927&quot;, &quot;…
## $ PartOfCumulativeCountSeries &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ DiagnosisCertainty          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
## $ SourceName                  &lt;chr&gt; &quot;US Nationally Notifiable Disease Surveill…
## $ CountValue                  &lt;dbl&gt; 85, 120, 84, 106, 39, 45, 28, 140, 48, 85,…</code></pre>
<p>Some of our variables only have one value. For example <code>ConditionName</code> is always going to be “Measles” and <code>CountryName</code> is always going to be “UNITED STATES OF AMERICA”, because this dataset is a dataset of measles case counts in the US. But you don’t have to take my word for it! Let’s use some tools to explore distinct values. First the <strong><code>dplyr</code></strong> function <code>distinct()</code> will print all the distinct values in a given column.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="welcome-to-the-tidyverse.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(measles_us, ConditionName)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   ConditionName
##   &lt;chr&gt;        
## 1 Measles</code></pre>
<p>As expected, we have only one distinct value in this column.</p>
<p>To contrast, let’s run <code>distinct()</code> on <code>Admin1Name</code>.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="welcome-to-the-tidyverse.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(measles_us, Admin1Name)</span></code></pre></div>
<pre><code>## # A tibble: 56 × 1
##    Admin1Name
##    &lt;chr&gt;     
##  1 WISCONSIN 
##  2 OHIO      
##  3 MICHIGAN  
##  4 NEVADA    
##  5 NEW JERSEY
##  6 WASHINGTON
##  7 DELAWARE  
##  8 KENTUCKY  
##  9 WYOMING   
## 10 INDIANA   
## # … with 46 more rows</code></pre>
<p>Now we get a clearer idea that this column contains names of US states and territories.</p>
<p>We might want, not just the distinct values, but also counts of how often each distinct value occurs. For that we can use <code>count()</code></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="welcome-to-the-tidyverse.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(measles_us, Admin1Name)</span></code></pre></div>
<pre><code>## # A tibble: 56 × 2
##    Admin1Name               n
##    &lt;chr&gt;                &lt;int&gt;
##  1 ALABAMA               7458
##  2 ALASKA                1869
##  3 AMERICAN SAMOA         118
##  4 ARIZONA               4685
##  5 ARKANSAS              5643
##  6 CALIFORNIA           14354
##  7 COLORADO              8042
##  8 CONNECTICUT          10816
##  9 DELAWARE              4507
## 10 DISTRICT OF COLUMBIA  5027
## # … with 46 more rows</code></pre>
<div id="challenge-1" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> Challenge<a href="welcome-to-the-tidyverse.html#challenge-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="shaded question">
<ol style="list-style-type: decimal">
<li>Test out <code>distinct()</code> with a few other columns in <code>measles_us</code>.</li>
<li><code>unique()</code> and <code>table()</code> are two base R functions that work similarly to <code>distinct()</code> and <code>count()</code>. Try running <code>unique(measles_us$Admin1Name)</code> and <code>table(measles_us$Admin1Name)</code>. How do the results differ from <code>distinct()</code> and <code>count()</code>? Which do you prefer?</li>
<li>Try to run <code>unique()</code> and <code>table()</code> on a few more variables in measles_us()</li>
</ol>
</div>
<!-- ## Subsetting Data -->
<!-- In the last chapter, we learned that we can use brackets to subset vectors and data frames.  -->
<!-- ### Subsetting Columns with `Select()` -->
<!-- To select columns of a data frame, use `select()`. This is a great way to create a smaller data frame with only the variables you are interested in. -->
<!-- `select()` is a function. Remember that functions have arguments which go inside the parentheses. The *first argument* to this function is the name of the data object, which in this case is `measles_us`, and the subsequent arguments are the names of the columns we want to keep, separated by commas.  -->
<!-- Let's try selecting the `Admin1Name` column and the `CountValue` column.  -->
<!-- ```{r} -->
<!-- select(measles_us, Admin1Name, CountValue) -->
<!-- ``` -->
<!-- As you can imagine, if you had a number of columns to select, it could get tiresome to write them all out. One way around this is to use a colon `:` to name a range of adjacent columns.   -->
<!-- ```{r colon} -->
<!-- select(measles_us, ConditionName:Admin1ISO) -->
<!-- ``` -->
<!-- Another helpful tool that the **`tidyverse`** provides is the **`pipe`** operator which looks like **`%>%`**. The pipe is made available via the **`magrittr`** package, installed automatically with **`dplyr`**. If you use RStudio, you can type the pipe with <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> if you have a PC or <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>M</kbd> if you have a Mac. -->
<!-- With the pipe you start with your data object and pipe it to the function, rather than naming the data as your first argument. So, the pipe becomes especially valuable when you have a number of steps that you want to connect. Another benefit of using the pipe in RStudio is that the interface will supply column names to you in the auto complete. This helps so you do not need to remember sometimes lengthy column names, and you are less likely to get an error from a typo. -->
<!-- ```{r} -->
<!-- measles_us %>%  -->
<!--   select(Admin1Name, PartOfCumulativeCountSeries) -->
<!-- ``` -->
<!-- Now unfortunately, we did not save this to an object, so while it prints out to the console, we cannot really do anything with these results. So now, let's think through which columns we want for our analysis and save this to a new object called `measles_us_mod`.  -->
<!-- So if we look at our data, we see that the columns `ConditionName`, `CountryName`, and `SourceName` have the same values throughout the data set. So it seems redundant to keep those.  `Admin1ISO` has redundant information to `Admin1Name`, so we can probably get rid of that as well. For this particular analysis we are going to take a state level view of measles, so we do not need `Admin2Name` and `CityName` either. That leaves us with `Admin1Name`, `PeriodStartDate`, `PeriodEndDate`, `PartOfCumulativeCountSeries`, and `CountValue`.  -->
<!-- ```{r select} -->
<!-- measles_us_mod <- -->
<!--   measles_us %>%  -->
<!--     select( -->
<!--     Admin1Name, -->
<!--     PeriodStartDate, -->
<!--     PeriodEndDate, -->
<!--     PartOfCumulativeCountSeries, -->
<!--     CountValue -->
<!--   ) -->
<!-- #inspect our new data frame -->
<!-- glimpse(measles_us_mod) -->
<!-- ``` -->
<!-- Now when you look in your environment pane, you should see your new object which as the same number of rows but 6 instead of 11 columns (or variables) -->
<!-- ### Renaming columns -->
<!-- Sometimes when you receive data, you may find that the column names are not very descriptive or useful, and it may be necessary to rename them. You can assign new names to columns when you select them `select(newColumnName = OldColumnName)` or you can use the `rename()` function. Like naming objects, you should use a simple, descriptive, relatively short name without spaces for your column names. -->
<!-- ```{r} -->
<!-- measles_us_mod <- -->
<!--   rename(measles_us_mod, State = Admin1Name) -->
<!-- ``` -->
<!-- ### Creating new columns with `mutate()` -->
<!-- Frequently you'll want to create new columns based on the values in existing columns, for example to do unit conversions, or to find the ratio of values in two columns. For this you can use the `mutate()` function. The `transmute()` function is similar, but **replaces** old columns with the new one. -->
<!-- We know that each row in our dataset represents some time span, but we're not sure what that span is. Below we use `mutate()` to create a new column called Span, which gives the number of days between the `PeriodEndDate` column and the `PeriodStartDate` column. This is why it is important to make sure your date columns are parsed properly as dates when importing your data. If the dates had been left as character data, it would not have been possible to do arithmetic with them.  -->
<!-- It's hard to get a sense of what different time spans are present in our data. We can use the `count()` function to help us figure that out. -->
<!-- ```{r count} -->
<!-- count(measles_us_mod,Span) -->
<!-- ``` -->
<!-- All those different time spans will get us into trouble when we try to work with the data. So next we need to filter the dataset for only the rows we want.  -->
<!-- ## Working with rows -->
<!-- ### `filter()` -->
<!-- `select()` lets us choose columns. To choose rows based on a specific criteria, we can use the `filter()` function. The arguments after the data frame are the condition(s) we want for our final dataframe to adhere to. Specify conditions using logical operator: -->
<!-- | operator | meaning                  | -->
<!-- |:---------|:-------------------------| -->
<!-- | ==       | exactly equal            | -->
<!-- | !=       | not equal to             | -->
<!-- | \<       | less than                | -->
<!-- | \<=      | less than or equal to    | -->
<!-- | \>       | greater than             | -->
<!-- | \>=      | greater than or equal to | -->
<!-- | x\|y     | x or y                   | -->
<!-- | x&y      | x and y                  | -->
<!-- | !x       | not x                    | -->
<!-- We'll come back to our problem of different time spans in a moment. First, let's try filtering our data by just one condition. We want to see just the rows that contain counts from Maryland. -->
<!-- ```{r filter-one-condition} -->
<!-- measles_us_mod %>% filter(State == "MARYLAND") -->
<!-- ``` -->
<!-- :::{.shaded .important} -->
<!-- When matching strings you must be exact. R is case-sensitive. So `State == "Maryland"` or `State == "maryland"` would return 0 rows. -->
<!-- ::: -->
<!-- You can add additional conditions to filter by, separated by commas or other logical operators like `&`, `>`, and `>`.  -->
<!-- Below we want just the rows for Maryland, and only include periods where the count was more than 500 reported cases. Note that while you need quotation marks around character data, you do not need them around numeric data. -->
<!-- ```{r filter-multiple} -->
<!-- measles_us_mod %>%  -->
<!--   filter(State == "MARYLAND" & CountValue > 500) -->
<!-- ``` -->
<!-- ### Grouping and Summarizing data -->
<!-- Many data analysis tasks can be approached using the *split-apply-combine* paradigm: split the data into groups, apply some analysis to each group, and then combine the results. **`dplyr`** makes this very easy through the use of the `group_by()` function. -->
<!-- `group_by()` is often used together with `summarize()`, which collapses each group into a single-row summary of that group. `group_by()` takes as arguments the column names that contain the **categorical** variables for which you want to calculate the summary statistics. -->
<!-- Let's return to our `measles_us_mod` data frame. To analyze this further, we need to separate out the rows that represent cumulative counts from the rows that have a fixed interval. So we use `filter()` as we did above, this time saving to a new object called `non_cumulative_period`. -->
<!-- ```{r filter-non-cum} -->
<!-- #filter out cumulative counts -->
<!-- non_cumulative <- -->
<!--   measles_us_mod %>% -->
<!--     filter(PartOfCumulativeCountSeries == 0) -->
<!-- ``` -->
<!-- How can we calculate the total number of measles cases in each state for each reported time period? -->
<!-- First we need to group our data by state, and then group by period. Remember that in our original data set each state contained counts for multiple municipalities. That means in our current data frame there will be multiple rows for each period that needs to be condensed. -->
<!-- ```{r group} -->
<!-- #group - prepares for summary calculations -->
<!-- count_by_period <- -->
<!--   non_cumulative %>% -->
<!--   group_by(State, PeriodStartDate) -->
<!-- count_by_period -->
<!-- ``` -->
<!-- When you inspect your new data frame, everything should look the same. Grouping prepares your data for summarize, but it does not do anything visually to the data. -->
<!-- Now let's trying summarizing that data. `summarize()` takes the dataframe as it's first argument, then you need to provide some calculation and the name for the new column where the results of that calculation will go. In this case, we will use the `sum()` function on the CountValue column and put this in a new column called TotalCount -->
<!-- ```{r summarize} -->
<!-- count_by_period <- -->
<!--   non_cumulative %>% -->
<!--   group_by(State, PeriodStartDate) %>%  -->
<!--   summarize(TotalCount = sum(CountValue)) -->
<!-- ``` -->
<!-- Notice how the use of pipes really comes in handy here. It saved us from having to create and keep track of a number of intermediate objects. -->
<!-- Now each row in our dataset represents a week of data. It might be better if we can look at yearly trends. So, let's try separating out the year from PeriodStartDate into its own column. In addition to `mutate()`, we will also use the `year()` function from **`lubridate`**. Since **`lubridate`** is not loaded with the core **`tidyverse`** let's go ahead and load that now. -->
<!-- ```{r lubridate} -->
<!-- library(lubridate) -->
<!-- ``` -->
<!-- Remember, you only need to install a package once, but you have to load it with each new session. -->
<!-- ```{r count-by-period} -->
<!-- #Get year in separate column from PeriodStartDate -->
<!-- count_by_period <-  -->
<!--   count_by_period %>%  -->
<!--   mutate(Year = year(PeriodStartDate)) -->
<!-- count_by_period -->
<!-- ``` -->
<!-- Now we can do our grouping and summarizing again as we did above. -->
<!-- ```{r count-by-state} -->
<!-- #Get totals for each state each year. -->
<!-- yearly_count_state <- -->
<!--   count_by_period %>%  -->
<!--   group_by(Year, State) %>%  -->
<!--   summarise(TotalCount = sum(TotalCount)) -->
<!-- yearly_count_state -->
<!-- ``` -->
<!-- Alternatively, to see a national level summary, we could group just by Year -->
<!-- ```{r count-year} -->
<!-- #Get totals each year. -->
<!-- yearly_count <- -->
<!--   count_by_period %>%  -->
<!--   group_by(Year) %>% -->
<!--   summarise(TotalCount = sum(TotalCount)) -->
<!-- yearly_count -->
<!-- ``` -->
<!-- ## Joining Datasets -->
<!-- Of course, looking at total counts in each state is not the most helpful metric without taking population into account. To rectify this, let's try joining some historical population data with our measles data. -->
<!-- First we need to import the population data. -->
<!-- ```{r} -->
<!-- #load csv of populations by state over time, changing some of the datatypes from default -->
<!-- hist_pop_by_state <- -->
<!--   read_csv( -->
<!--     "data/Historical_Population_by_State.csv", -->
<!--     col_types = cols(ALASKA = col_double(), HAWAII = col_double()) -->
<!--   ) -->
<!-- ``` -->
<!-- ```{r eval=FALSE} -->
<!-- View(hist_pop_by_state) -->
<!-- ``` -->
<!-- As we saw in our measles data import, the presence of NAs makes it necessary to explicitly state that the Hawaii and Alaska columns contain numerical data. -->
<!-- ### Long vs Wide formats -->
<!-- For data to be considered "tidy", it should be in what is called "long" format. Each column is a variable, each row is an observation, and each cell is a value. Our state population data is in "wide" format, which is often preferable for human-readability, but is less ideal for machine-readability. -->
<!-- We will use the package **`tidyr`** and the function `pivot_longer` to convert our population data to a long format, thus making it easier to join with our measles data. -->
<!-- Each column in our population dataset represents a state. To make it tidy we are going to reduce those to one column called State with the state names as the values of the column. We will then need to create a new column for population containing the current cell values. To remember that the population data is provided in 1000s of persons, we will call this new column pop1000. -->
<!-- `pivot_longer()` takes four principal arguments: -->
<!-- 1.  the data -->
<!-- 2.  *cols* are the names of the columns we use to fill the new values variable (or to drop). -->
<!-- 3.  the *names_to* column variable we wish to create from the *cols* provided. -->
<!-- 4.  the *values_to* column variable we wish to create and fill with values associated with the *cols* provided. -->
<!-- ```{r} -->
<!-- library(tidyr) -->
<!-- hist_pop_long <- hist_pop_by_state %>%  -->
<!--   pivot_longer(ALASKA:WYOMING, -->
<!--                names_to = "State", -->
<!--                values_to = "pop1000") -->
<!-- ``` -->
<!-- ```{r eval=FALSE} -->
<!-- View(hist_pop_long) -->
<!-- ``` -->
<!-- Now our two datasets have similar structures, a column of state names, a column of years, and a column of values. Let's join these two datasets by the state and year columns. Note that if both sets have the same column names, you do not need to specify anything in the by argument. We use a left join here which preserves all the rows in our measles dataset and adds the matching rows from the population dataset. -->
<!-- ```{r} -->
<!-- joined_df <- -->
<!--   left_join(yearly_count_state, hist_pop_long, by=c("State" = "State", "Year" = "DATE" )) -->
<!-- joined_df -->
<!-- ``` -->
<!-- Now we can use our old friend `mutate()` to add a rate column calculated from the count and pop1000 columns. -->
<!-- ```{r} -->
<!-- #Add column for rate (per 1000) of measles -->
<!-- rate_by_year <- mutate(joined_df, rate = TotalCount / pop1000) -->
<!-- rate_by_year -->
<!-- ``` -->

</div>
</div>
</div>



<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p><a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a><a href="welcome-to-the-tidyverse.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>read more about tidy data <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html" class="uri">https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html</a><a href="welcome-to-the-tidyverse.html#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-r-and-rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotting-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CDABS-R-Series.pdf", "CDABS-R-Series.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
